{"remainingRequest":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\src\\views\\new\\EventRuleData.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\src\\views\\new\\EventRuleData.vue","mtime":1701354822114},{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1699426402170},{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1699426403263},{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1699426402170},{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1699426402439}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jcmVhdGVGb3JPZkl0ZXJhdG9ySGVscGVyIGZyb20gIkQ6L1Byb2plY3QvdXNlcnBvcnRyYWl0X1FUL3VzZXItcG9ydHJhaXQtZm9yLXF0LW1hc3Rlci9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY3JlYXRlRm9yT2ZJdGVyYXRvckhlbHBlciI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLml0ZXJhdG9yLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc2VhcmNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaC5qcyI7CmltcG9ydCByZXF1ZXN0IGZyb20gIkAvdXRpbHMvcmVxdWVzdCI7CmltcG9ydCAqIGFzIGVjaGFydHMgZnJvbSAnZWNoYXJ0cyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiRXZlbnRSdWxlRGF0YSIsCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHNlYXJjaDogJycsCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICB0YWJsZURhdGE6IFtdLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICB0b3RhbDogMCwKICAgICAgbWVyZ2VJbmRleE1hcDoge30sCiAgICAgIGRpYWxvZ0JlaGF2aW9yVmlld1Zpc2libGU6IGZhbHNlLAogICAgICB2aWV3X2NoYXJ0OiBudWxsLAogICAgICBiZWhhdmlvcl9ydWxlX2RhdGE6IG51bGwKICAgIH07CiAgfSwKICBjcmVhdGVkOiBmdW5jdGlvbiBjcmVhdGVkKCkgewogICAgdGhpcy5sb2FkKCk7CiAgICB0aGlzLm1lcmdlSW5kZXhNYXAgPSBuZXcgTWFwKCk7CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgbG9hZDogZnVuY3Rpb24gbG9hZCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHJlcXVlc3QuZ2V0KCIvYXBpL3J1bGVfZGF0YSIsIHsKICAgICAgICBwYXJhbXM6IHsKICAgICAgICAgICJwYWdlX251bSI6IHRoaXMuY3VycmVudFBhZ2UsCiAgICAgICAgICAicGFnZV9zaXplIjogdGhpcy5wYWdlU2l6ZSwKICAgICAgICAgICJzZWFyY2giOiB0aGlzLnNlYXJjaAogICAgICAgIH0KICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgaWYgKHJlcy5zdGF0dXNfY29kZSA9PT0gMCkgewogICAgICAgICAgX3RoaXMubWVyZ2UocmVzLnJ1bGVfZGF0YSk7CgogICAgICAgICAgX3RoaXMudGFibGVEYXRhID0gcmVzLnJ1bGVfZGF0YTsKICAgICAgICAgIF90aGlzLnRvdGFsID0gcmVzLnRvdGFsOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpcy4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgIG1lc3NhZ2U6IHJlcy5zdGF0dXNfbXNnCiAgICAgICAgICB9KTsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBtZXJnZTogZnVuY3Rpb24gbWVyZ2UoZGF0YSkgewogICAgICB0aGlzLm1lcmdlSW5kZXhNYXAgPSBuZXcgTWFwKCk7CiAgICAgIHZhciBjdXJJZHggPSAwOwoKICAgICAgZm9yICh2YXIgaWR4ID0gMTsgaWR4IDwgZGF0YS5sZW5ndGg7IGlkeCsrKSB7CiAgICAgICAgaWYgKGRhdGFbaWR4XS51c2VyX2lkID09PSBkYXRhW2lkeCAtIDFdLnVzZXJfaWQpIHsKICAgICAgICAgIGNvbnRpbnVlOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1lcmdlSW5kZXhNYXAuc2V0KGN1cklkeCwgaWR4IC0gY3VySWR4KTsKICAgICAgICAgIGN1cklkeCA9IGlkeDsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMubWVyZ2VJbmRleE1hcC5zZXQoY3VySWR4LCBkYXRhLmxlbmd0aCAtIGN1cklkeCk7CiAgICAgIGNvbnNvbGUubG9nKHRoaXMubWVyZ2VJbmRleE1hcCk7CiAgICB9LAogICAgYXJyYXlTcGFuTWV0aG9kOiBmdW5jdGlvbiBhcnJheVNwYW5NZXRob2QoX3JlZikgewogICAgICB2YXIgcm93ID0gX3JlZi5yb3csCiAgICAgICAgICBjb2x1bW4gPSBfcmVmLmNvbHVtbiwKICAgICAgICAgIHJvd0luZGV4ID0gX3JlZi5yb3dJbmRleCwKICAgICAgICAgIGNvbHVtbkluZGV4ID0gX3JlZi5jb2x1bW5JbmRleDsKCiAgICAgIGlmIChjb2x1bW5JbmRleCA9PT0gMCkgewogICAgICAgIHZhciByb3dzID0gdGhpcy5tZXJnZUluZGV4TWFwLmdldChyb3dJbmRleCk7CiAgICAgICAgcmV0dXJuIFtyb3dzLCAxXTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZVNpemVDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZVNpemVDaGFuZ2UocGFnZVNpemUpIHsKICAgICAgLy8g5pS55Y+Y5q+P6aG155qE5aSn5bCPCiAgICAgIHRoaXMucGFnZVNpemUgPSBwYWdlU2l6ZTsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAogICAgaGFuZGxlQ3VycmVudENoYW5nZTogZnVuY3Rpb24gaGFuZGxlQ3VycmVudENoYW5nZShwYWdlTnVtKSB7CiAgICAgIC8v5pS55Y+Y5b2T5YmN6aG156CBCiAgICAgIHRoaXMuY3VycmVudFBhZ2UgPSBwYWdlTnVtOwogICAgICB0aGlzLmxvYWQoKTsKICAgIH0sCiAgICB1cGRhdGVSdWxlRGF0YTogZnVuY3Rpb24gdXBkYXRlUnVsZURhdGEoKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmVxdWVzdC5wb3N0KCIvYXBpL2dlbmVfcnVsZSIpLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGlmIChyZXMuc3RhdHVzX2NvZGUgPT09IDApIHsKICAgICAgICAgIF90aGlzMi4kbWVzc2FnZSh7CiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgbWVzc2FnZTogIuabtOaWsOS4re+8jOivtzUtMTDliIbpkp/lkI7liLfmlrAiCiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgbWVzc2FnZTogcmVzLnN0YXR1c19tc2cKICAgICAgICAgIH0pOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgaGFuZGxlVmlld0JlaGF2aW9yOiBmdW5jdGlvbiBoYW5kbGVWaWV3QmVoYXZpb3IoYmVoYXZpb3JfcnVsZV9kYXRhKSB7CiAgICAgIHRoaXMuYmVoYXZpb3JfcnVsZV9kYXRhID0gYmVoYXZpb3JfcnVsZV9kYXRhOwogICAgICBjb25zb2xlLmxvZygiYmVoYXZpb3JfcnVsZV9kYXRhPSIsIGJlaGF2aW9yX3J1bGVfZGF0YSk7CiAgICAgIHRoaXMuZGlhbG9nQmVoYXZpb3JWaWV3VmlzaWJsZSA9IHRydWU7CiAgICB9LAogICAgaW5pdEVjaGFydHM6IGZ1bmN0aW9uIGluaXRFY2hhcnRzKCkgewogICAgICB2YXIgYmVoYXZpb3JfcnVsZV9kYXRhID0gdGhpcy5iZWhhdmlvcl9ydWxlX2RhdGE7CgogICAgICBpZiAoYmVoYXZpb3JfcnVsZV9kYXRhID09IG51bGwgfHwgYmVoYXZpb3JfcnVsZV9kYXRhLnJ1bGVfZWxlbWVudHMgPT0gbnVsbCkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgaWYgKHRoaXMudmlld19jaGFydCA9PSBudWxsKSB7CiAgICAgICAgY29uc29sZS5sb2coInZpZXdfY2hhcnQgbnVsbCIpOwogICAgICAgIHRoaXMudmlld19jaGFydCA9IGVjaGFydHMuaW5pdCh0aGlzLiRyZWZzLnZpZXdfY2hhcnQsIG51bGwsIHsKICAgICAgICAgIHJlbmRlcmVyOiAnc3ZnJwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIGNvbnNvbGUubG9nKCJ2aWV3X2NoYXJ0IG5vdCBudWxsIik7CiAgICAgICAgdGhpcy52aWV3X2NoYXJ0LmNsZWFyKCk7CiAgICAgIH0KCiAgICAgIHZhciBydWxlTWFwID0gbmV3IE1hcCgpOwogICAgICBiZWhhdmlvcl9ydWxlX2RhdGEucnVsZV9lbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbGVtZW50LCBpbmRleCkgewogICAgICAgIGlmICghcnVsZU1hcC5oYXMoZWxlbWVudC5ydWxlX2Rlc2MpKSB7CiAgICAgICAgICBydWxlTWFwLnNldChlbGVtZW50LnJ1bGVfZGVzYywgdHJ1ZSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdmFyIHJ1bGVzID0gbmV3IEFycmF5KCk7CiAgICAgIHZhciBydWxlX2Rlc2NfMl9pbmRleCA9IG5ldyBNYXAoKTsKICAgICAgdmFyIGlkeCA9IDA7CgogICAgICB2YXIgX2l0ZXJhdG9yID0gX2NyZWF0ZUZvck9mSXRlcmF0b3JIZWxwZXIocnVsZU1hcC5rZXlzKCkpLAogICAgICAgICAgX3N0ZXA7CgogICAgICB0cnkgewogICAgICAgIGZvciAoX2l0ZXJhdG9yLnMoKTsgIShfc3RlcCA9IF9pdGVyYXRvci5uKCkpLmRvbmU7KSB7CiAgICAgICAgICB2YXIga2V5ID0gX3N0ZXAudmFsdWU7CiAgICAgICAgICBydWxlcy5wdXNoKGtleSk7CiAgICAgICAgICBydWxlX2Rlc2NfMl9pbmRleC5zZXQoa2V5LCBpZHgpOwogICAgICAgICAgaWR4ID0gaWR4ICsgMTsKICAgICAgICB9CiAgICAgIH0gY2F0Y2ggKGVycikgewogICAgICAgIF9pdGVyYXRvci5lKGVycik7CiAgICAgIH0gZmluYWxseSB7CiAgICAgICAgX2l0ZXJhdG9yLmYoKTsKICAgICAgfQoKICAgICAgdmFyIGRhdGEgPSBuZXcgQXJyYXkoKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgYmVoYXZpb3JfcnVsZV9kYXRhLnJ1bGVfZWxlbWVudHMubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgICAgdmFyIGVsZW1lbnQgPSBiZWhhdmlvcl9ydWxlX2RhdGEucnVsZV9lbGVtZW50c1tpXTsKICAgICAgICB2YXIgbmV4dF9lbGVtZW50ID0gYmVoYXZpb3JfcnVsZV9kYXRhLnJ1bGVfZWxlbWVudHNbaSArIDFdOwogICAgICAgIHZhciBpbmRleCA9IHJ1bGVfZGVzY18yX2luZGV4LmdldChlbGVtZW50LnJ1bGVfZGVzYyk7CiAgICAgICAgdmFyIGJlZ2luX3RpbWUgPSBlbGVtZW50LnRpbWVzdGFtcDsKICAgICAgICB2YXIgZW5kX3RpbWUgPSBuZXh0X2VsZW1lbnQudGltZXN0YW1wOwogICAgICAgIHZhciBkdXJhdGlvbiA9IGVuZF90aW1lIC0gYmVnaW5fdGltZTsKICAgICAgICB2YXIgZCA9IHsKICAgICAgICAgIHZhbHVlOiBbaW5kZXgsIGJlZ2luX3RpbWUsIGVuZF90aW1lLCBkdXJhdGlvbl0KICAgICAgICB9OwogICAgICAgIGRhdGEucHVzaChkKTsKICAgICAgfQoKICAgICAgdmFyIG9wdGlvbiA9IHsKICAgICAgICB0b29sYm94OiB7CiAgICAgICAgICBzaG93OiB0cnVlLAogICAgICAgICAgZmVhdHVyZTogewogICAgICAgICAgICBtYXJrOiB7CiAgICAgICAgICAgICAgc2hvdzogdHJ1ZQogICAgICAgICAgICB9LAogICAgICAgICAgICBzYXZlQXNJbWFnZTogewogICAgICAgICAgICAgIHNob3c6IHRydWUKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgZGF0YVpvb206IFt7CiAgICAgICAgICB0eXBlOiAnc2xpZGVyJywKICAgICAgICAgIGZpbHRlck1vZGU6ICd3ZWFrRmlsdGVyJywKICAgICAgICAgIHNob3dEYXRhU2hhZG93OiBmYWxzZSwKICAgICAgICAgIHRvcDogNDAwLAogICAgICAgICAgbGFiZWxGb3JtYXR0ZXI6ICcnCiAgICAgICAgfSwgewogICAgICAgICAgdHlwZTogJ2luc2lkZScsCiAgICAgICAgICBmaWx0ZXJNb2RlOiAnd2Vha0ZpbHRlcicKICAgICAgICB9XSwKICAgICAgICBncmlkOiB7CiAgICAgICAgICBoZWlnaHQ6IDMwMAogICAgICAgIH0sCiAgICAgICAgeEF4aXM6IHsKICAgICAgICAgIHR5cGU6ICd2YWx1ZScsCiAgICAgICAgICAvL21pbjogc3RhcnRUaW1lLAogICAgICAgICAgc2NhbGU6IHRydWUsCiAgICAgICAgICBheGlzTGFiZWw6IHsKICAgICAgICAgICAgZm9ybWF0dGVyOiBmdW5jdGlvbiBmb3JtYXR0ZXIodmFsKSB7CiAgICAgICAgICAgICAgcmV0dXJuIHRpbWVzdGFtcFRvVGltZSh2YWwpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwKICAgICAgICB5QXhpczogewogICAgICAgICAgZGF0YTogcnVsZXMKICAgICAgICB9LAogICAgICAgIHNlcmllczogW3sKICAgICAgICAgIHR5cGU6ICdjdXN0b20nLAogICAgICAgICAgcmVuZGVySXRlbTogcmVuZGVySXRlbSwKICAgICAgICAgIGl0ZW1TdHlsZTogewogICAgICAgICAgICBvcGFjaXR5OiAwLjgKICAgICAgICAgIH0sCiAgICAgICAgICBlbmNvZGU6IHsKICAgICAgICAgICAgeDogWzEsIDJdLAogICAgICAgICAgICB5OiAwCiAgICAgICAgICB9LAogICAgICAgICAgZGF0YTogZGF0YQogICAgICAgIH1dCiAgICAgIH07CiAgICAgIGNvbnNvbGUubG9nKCJteSBvcHRpb249Iiwgb3B0aW9uKTsKICAgICAgdGhpcy52aWV3X2NoYXJ0LnNldE9wdGlvbihvcHRpb24pOwogICAgfSwKICAgIG9wZW46IGZ1bmN0aW9uIG9wZW4oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgdGhpcy4kbmV4dFRpY2soZnVuY3Rpb24gKCkgewogICAgICAgIF90aGlzMy5pbml0RWNoYXJ0cygpOwogICAgICB9KTsKICAgIH0KICB9Cn07CgpmdW5jdGlvbiBzbGVlcCh0aW1lKSB7CiAgdmFyIHRpbWVTdGFtcCA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpOwogIHZhciBlbmRUaW1lID0gdGltZVN0YW1wICsgdGltZTsKCiAgd2hpbGUgKHRydWUpIHsKICAgIGlmIChuZXcgRGF0ZSgpLmdldFRpbWUoKSA+IGVuZFRpbWUpIHsKICAgICAgcmV0dXJuOwogICAgfQogIH0KfQoKZnVuY3Rpb24gcmVuZGVySXRlbShwYXJhbXMsIGFwaSkgewogIHZhciBjYXRlZ29yeUluZGV4ID0gYXBpLnZhbHVlKDApOwogIHZhciBzdGFydCA9IGFwaS5jb29yZChbYXBpLnZhbHVlKDEpLCBjYXRlZ29yeUluZGV4XSk7CiAgdmFyIGVuZCA9IGFwaS5jb29yZChbYXBpLnZhbHVlKDIpLCBjYXRlZ29yeUluZGV4XSk7CiAgdmFyIGhlaWdodCA9IGFwaS5zaXplKFswLCAxXSlbMV0gKiAwLjY7CiAgdmFyIHJlY3RTaGFwZSA9IGVjaGFydHMuZ3JhcGhpYy5jbGlwUmVjdEJ5UmVjdCh7CiAgICB4OiBzdGFydFswXSwKICAgIHk6IHN0YXJ0WzFdIC0gaGVpZ2h0IC8gMiwKICAgIHdpZHRoOiBlbmRbMF0gLSBzdGFydFswXSwKICAgIGhlaWdodDogaGVpZ2h0CiAgfSwgewogICAgeDogcGFyYW1zLmNvb3JkU3lzLngsCiAgICB5OiBwYXJhbXMuY29vcmRTeXMueSwKICAgIHdpZHRoOiBwYXJhbXMuY29vcmRTeXMud2lkdGgsCiAgICBoZWlnaHQ6IHBhcmFtcy5jb29yZFN5cy5oZWlnaHQKICB9KTsKICByZXR1cm4gcmVjdFNoYXBlICYmIHsKICAgIHR5cGU6ICdyZWN0JywKICAgIHRyYW5zaXRpb246IFsnc2hhcGUnXSwKICAgIHNoYXBlOiByZWN0U2hhcGUsCiAgICBzdHlsZTogYXBpLnN0eWxlKCkKICB9Owp9CgpmdW5jdGlvbiB0aW1lc3RhbXBUb1RpbWUodGltZXN0YW1wKSB7CiAgdmFyIGRhdGUgPSBuZXcgRGF0ZSh0aW1lc3RhbXApOwogIHZhciBZID0gZGF0ZS5nZXRGdWxsWWVhcigpICsgJy0nOwogIHZhciBNID0gKGRhdGUuZ2V0TW9udGgoKSArIDEgPCAxMCA/ICcwJyArIChkYXRlLmdldE1vbnRoKCkgKyAxKSA6IGRhdGUuZ2V0TW9udGgoKSArIDEpICsgJy0nOwogIHZhciBEID0gKGRhdGUuZ2V0RGF0ZSgpIDwgMTAgPyAnMCcgKyBkYXRlLmdldERhdGUoKSA6IGRhdGUuZ2V0RGF0ZSgpKSArICcgJzsKICB2YXIgaCA9IChkYXRlLmdldEhvdXJzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0SG91cnMoKSA6IGRhdGUuZ2V0SG91cnMoKSkgKyAnOic7CiAgdmFyIG0gPSAoZGF0ZS5nZXRNaW51dGVzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0TWludXRlcygpIDogZGF0ZS5nZXRNaW51dGVzKCkpICsgJzonOwogIHZhciBzID0gZGF0ZS5nZXRTZWNvbmRzKCkgPCAxMCA/ICcwJyArIGRhdGUuZ2V0U2Vjb25kcygpIDogZGF0ZS5nZXRTZWNvbmRzKCk7CiAgcmV0dXJuIE0gKyBEICsgaCArIG0gKyBzOwp9"},{"version":3,"sources":["D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\src\\views\\new\\EventRuleData.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div style=\"margin: 10px 0\">\r\n    <el-input v-model=\"search\" placeholder=\"请输入关键字\" style=\"width: 20%\" clearable></el-input>\r\n    <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"load\">查询</el-button>\r\n    <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"updateRuleData\">更新规则数据</el-button>\r\n    \r\n    \r\n    <el-table \r\n      v-loading=\"loading\"\r\n      :span-method=\"arraySpanMethod\"\r\n      :data=\"tableData\" \r\n      style=\"width: 100%\"\r\n    >\r\n      <el-table-column fixed prop=\"user_name\" label=\"用户名\" width=\"120\" />\r\n      <el-table-column prop=\"begin_time\" label=\"开始时间\" width=\"180\" />\r\n      <el-table-column prop=\"use_time\" label=\"使用时长\" width=\"180\" />\r\n\r\n      <el-table-column label=\"行为规则数据\" :show-overflow-tooltip=\"true\" width=\"500\">\r\n        <template #default=\"scope\">\r\n            <el-tag\r\n              v-for=\"tag in scope.row.behavior_rule_data.rule_elements\"\r\n              :key=\"tag.rule_id\"\r\n              class=\"mx-1\"\r\n              :disable-transitions=\"false\"\r\n            >\r\n              {{ tag.rule_desc }}\r\n            </el-tag>\r\n          </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" width=\"200\" >\r\n        <template #default=\"scope\">\r\n          <el-button link type=\"primary\" size=\"small\" @click=\"handleViewBehavior(scope.row.behavior_rule_data)\">\r\n            查看行为图\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n\r\n    <el-dialog \r\n      v-model=\"dialogBehaviorViewVisible\" \r\n      title=\"单次使用行为图\"\r\n      @open=\"open()\"\r\n      >\r\n      <div ref=\"view_chart\" style=\"width: 750px; height: 400px;\"></div>\r\n    </el-dialog>\r\n\r\n    <div style=\"margin: 10px 0\">\r\n      <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-sizes=\"[5, 10, 20]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\">\r\n      </el-pagination>\r\n    </div>\r\n\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\nimport * as echarts from 'echarts';\r\n\r\nexport default {\r\n  name: \"EventRuleData\",\r\n  data() {\r\n    return {\r\n      search: '',\r\n      loading: false,\r\n      tableData: [],\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      mergeIndexMap: {},\r\n      dialogBehaviorViewVisible: false,\r\n      view_chart: null,\r\n      behavior_rule_data: null,\r\n    }\r\n  },\r\n  created() {\r\n    this.load()\r\n    this.mergeIndexMap = new Map()\r\n  },\r\n  mounted() {\r\n\r\n  },\r\n  methods: {\r\n    load() {\r\n      this.loading = true\r\n      request.get(\"/api/rule_data\", {\r\n        params: {\r\n          \"page_num\": this.currentPage,\r\n          \"page_size\": this.pageSize,\r\n          \"search\": this.search\r\n        }\r\n      }).then(res => {\r\n        console.log(res)\r\n        if (res.status_code === 0) {\r\n          this.merge(res.rule_data)\r\n          this.tableData = res.rule_data\r\n          this.total = res.total\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.status_msg\r\n          })\r\n        }\r\n      })\r\n\r\n      this.loading = false\r\n    },\r\n    merge(data) {\r\n      this.mergeIndexMap = new Map()\r\n      let curIdx = 0\r\n      for (var idx = 1; idx < data.length; idx++) {\r\n        if (data[idx].user_id === data[idx-1].user_id) {\r\n          continue\r\n        } else {\r\n          this.mergeIndexMap.set(curIdx, idx-curIdx)\r\n          curIdx = idx\r\n        }\r\n      }\r\n\r\n      this.mergeIndexMap.set(curIdx, data.length - curIdx)\r\n      console.log(this.mergeIndexMap)\r\n    },\r\n    arraySpanMethod({row,column,rowIndex,columnIndex}) {\r\n      if (columnIndex === 0) {\r\n        let rows = this.mergeIndexMap.get(rowIndex)\r\n        return [rows, 1]\r\n      }\r\n    },\r\n    handleSizeChange(pageSize) {  // 改变每页的大小\r\n      this.pageSize = pageSize;\r\n      this.load();\r\n    },\r\n    handleCurrentChange(pageNum) {  //改变当前页码\r\n      this.currentPage = pageNum;\r\n      this.load()\r\n    },\r\n    updateRuleData() {\r\n      request.post(\"/api/gene_rule\").then(res => {\r\n        if (res.status_code === 0) {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"更新中，请5-10分钟后刷新\"\r\n          })\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.status_msg\r\n          })\r\n        }\r\n      })\r\n    },\r\n    handleViewBehavior(behavior_rule_data) {\r\n      this.behavior_rule_data = behavior_rule_data\r\n      console.log(\"behavior_rule_data=\", behavior_rule_data)\r\n      this.dialogBehaviorViewVisible = true\r\n    },\r\n    initEcharts(){\r\n      let behavior_rule_data = this.behavior_rule_data\r\n      if (behavior_rule_data == null || behavior_rule_data.rule_elements == null) {\r\n          return \r\n        }\r\n        if (this.view_chart == null) {\r\n          console.log(\"view_chart null\")\r\n          this.view_chart = echarts.init(this.$refs.view_chart,null, {renderer: 'svg'});\r\n        } else {\r\n          console.log(\"view_chart not null\")\r\n          this.view_chart.clear()\r\n        }\r\n\r\n        let ruleMap = new Map()\r\n        behavior_rule_data.rule_elements.forEach((element, index) => {\r\n          if (!ruleMap.has(element.rule_desc)) {\r\n            ruleMap.set(element.rule_desc, true)\r\n          }\r\n        })\r\n        let rules = new Array()\r\n        let rule_desc_2_index = new Map()\r\n        let idx = 0\r\n        for (let key of ruleMap.keys()) {\r\n          rules.push(key)\r\n          rule_desc_2_index.set(key, idx)\r\n          idx = idx + 1\r\n        }\r\n\r\n        let data = new Array()\r\n        for (let i = 0; i < behavior_rule_data.rule_elements.length - 1; i++) {\r\n          let element = behavior_rule_data.rule_elements[i]\r\n          let next_element = behavior_rule_data.rule_elements[i+1]\r\n          let index = rule_desc_2_index.get(element.rule_desc)\r\n          let begin_time = element.timestamp \r\n          let end_time = next_element.timestamp\r\n          let duration = end_time - begin_time\r\n          let d = {\r\n            value: [index, begin_time, end_time, duration]\r\n          }\r\n          data.push(d)\r\n        }\r\n\r\n\r\n        let option = {\r\n          toolbox: {\r\n              show: true,\r\n              feature: {\r\n                  mark: {show: true},\r\n                  saveAsImage: {show: true},\r\n              }\r\n          },\r\n          dataZoom: [\r\n            {\r\n              type: 'slider',\r\n              filterMode: 'weakFilter',\r\n              showDataShadow: false,\r\n              top: 400,\r\n              labelFormatter: ''\r\n            },\r\n            {\r\n              type: 'inside',\r\n              filterMode: 'weakFilter'\r\n            }\r\n          ],\r\n          grid: {\r\n            height: 300\r\n          },\r\n          xAxis: {\r\n            type: 'value',\r\n            //min: startTime,\r\n            scale: true,\r\n            axisLabel: {\r\n              formatter: function (val) {\r\n                return timestampToTime(val)\r\n              },\r\n            }\r\n          },\r\n          yAxis: {\r\n            data: rules\r\n          },\r\n          series: [\r\n            {\r\n              type: 'custom',\r\n              renderItem: renderItem,\r\n              itemStyle: {\r\n                opacity: 0.8\r\n              },\r\n              encode: {\r\n                x: [1, 2],\r\n                y: 0\r\n              },\r\n              data: data\r\n            }\r\n          ]\r\n        };\r\n        \r\n        console.log(\"my option=\", option)\r\n        this.view_chart.setOption(option)\r\n    },\r\n    open() {\r\n      this.$nextTick(() => {\r\n        this.initEcharts()\r\n      })\r\n    }\r\n  }  \r\n}\r\n\r\n\r\nfunction sleep(time){\r\n var timeStamp = new Date().getTime();\r\n var endTime = timeStamp + time;\r\n while(true){\r\n  if (new Date().getTime() > endTime){\r\n    return;\r\n  } \r\n }\r\n}\r\n\r\nfunction renderItem(params, api) {\r\n  var categoryIndex = api.value(0);\r\n  var start = api.coord([api.value(1), categoryIndex]);\r\n  var end = api.coord([api.value(2), categoryIndex]);\r\n  var height = api.size([0, 1])[1] * 0.6;\r\n  var rectShape = echarts.graphic.clipRectByRect(\r\n    {\r\n      x: start[0],\r\n      y: start[1] - height / 2,\r\n      width: end[0] - start[0],\r\n      height: height\r\n    },\r\n    {\r\n      x: params.coordSys.x,\r\n      y: params.coordSys.y,\r\n      width: params.coordSys.width,\r\n      height: params.coordSys.height\r\n    }\r\n  );\r\n  return (\r\n    rectShape && {\r\n      type: 'rect',\r\n      transition: ['shape'],\r\n      shape: rectShape,\r\n      style: api.style()\r\n    }\r\n  );\r\n}\r\n\r\nfunction timestampToTime(timestamp) {\r\n        var date = new Date(timestamp);\r\n        var Y = date.getFullYear() + '-';\r\n        var M = (date.getMonth()+1 < 10 ? '0'+(date.getMonth()+1) : date.getMonth()+1) + '-';\r\n        var D = (date.getDate() < 10 ? '0'+ date.getDate() : date.getDate()) + ' ';\r\n        var h = (date.getHours() < 10 ? '0'+ date.getHours() : date.getHours()) + ':';\r\n        var m = (date.getMinutes() < 10 ? '0'+ date.getMinutes() : date.getMinutes()) + ':';\r\n        var s = (date.getSeconds() < 10 ? '0'+ date.getSeconds() : date.getSeconds());\r\n        return M+D+h+m+s;\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"sourceRoot":""}]}