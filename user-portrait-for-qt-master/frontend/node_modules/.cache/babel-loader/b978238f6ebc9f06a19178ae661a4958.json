{"remainingRequest":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\src\\views\\new\\Permission.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\src\\views\\new\\Permission.vue","mtime":1699352770654},{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1699426402170},{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1699426403263},{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1699426402170},{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1699426402439}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2guanMiOwppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIlBlcm1pc3Npb24iLAogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWFyY2g6ICIiLAogICAgICBsb2FkaW5nOiB0cnVlLAogICAgICBkaWFsb2dfYWRkX2FjY291bnQ6IGZhbHNlLAogICAgICBjdXJyZW50UGFnZTogMSwKICAgICAgcGFnZVNpemU6IDEwLAogICAgICB0b3RhbDogMCwKICAgICAgYWRkX2FjY291bnRfZm9ybToge30sCiAgICAgIGFjY291bnRfZGF0YTogbmV3IEFycmF5KCksCiAgICAgIHBlcm1pc3Npb25fb3B0aW9uOiBuZXcgTWFwKFtbMSwgIuaZrumAmiJdLCBbMiwgJ+euoeeQhuWRmCddXSksCiAgICAgIHBlcm1pc3Npb25fZGVzYzogbmV3IE1hcChbWzEsICLmma7pgJoiXSwgWzIsICfnrqHnkIblkZgnXSwgWzMsICfotoXnuqfnrqHnkIblkZgnXV0pCiAgICB9OwogIH0sCiAgY3JlYXRlZDogZnVuY3Rpb24gY3JlYXRlZCgpIHsKICAgIHRoaXMubG9hZCgpOwogIH0sCiAgbWV0aG9kczogewogICAgbG9hZDogZnVuY3Rpb24gbG9hZCgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIHJlcXVlc3QuZ2V0KCIvYXBpL2FjY291bnRzIiwgewogICAgICAgIHBhcmFtczogewogICAgICAgICAgInBhZ2VfbnVtIjogdGhpcy5jdXJyZW50UGFnZSwKICAgICAgICAgICJwYWdlX3NpemUiOiB0aGlzLnBhZ2VTaXplLAogICAgICAgICAgInNlYXJjaCI6IHRoaXMuc2VhcmNoCiAgICAgICAgfQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXMpIHsKICAgICAgICBjb25zb2xlLmxvZyhyZXMpOwoKICAgICAgICBpZiAocmVzLnN0YXR1c19jb2RlID09PSAwKSB7CiAgICAgICAgICBfdGhpcy5hY2NvdW50X2RhdGEgPSByZXMuYWNjb3VudHM7CiAgICAgICAgICBfdGhpcy50b3RhbCA9IHJlcy50b3RhbDsKICAgICAgICB9CiAgICAgIH0pOwogICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVTaXplQ2hhbmdlKHBhZ2VTaXplKSB7CiAgICAgIC8vIOaUueWPmOavj+mhteeahOWkp+WwjwogICAgICB0aGlzLnBhZ2VTaXplID0gcGFnZVNpemU7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUN1cnJlbnRDaGFuZ2UocGFnZU51bSkgewogICAgICAvL+aUueWPmOW9k+WJjemhteeggQogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZU51bTsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAogICAgYWRkX2FjY291bnQ6IGZ1bmN0aW9uIGFkZF9hY2NvdW50KCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYWRkX2FjY291bnRfZm9ybSk7CgogICAgICBpZiAodGhpcy5hZGRfYWNjb3VudF9mb3JtLmFjY291bnRfcHdkICE9IHRoaXMuYWRkX2FjY291bnRfZm9ybS5hY2NvdW50X3B3ZDIpIHsKICAgICAgICB0aGlzLiRtZXNzYWdlKHsKICAgICAgICAgIHR5cGU6ICJpbmZvIiwKICAgICAgICAgIG1lc3NhZ2U6ICLlr4bnoIHkuI3kuIDoh7QiCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICByZXF1ZXN0LnBvc3QoIi9hcGkvYWNjb3VudCIsIHRoaXMuYWRkX2FjY291bnRfZm9ybSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgY29uc29sZS5sb2cocmVzKTsKCiAgICAgICAgaWYgKHJlcy5zdGF0dXNfY29kZSA9PT0gMCkgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBtZXNzYWdlOiAi5re75Yqg5oiQ5YqfIgogICAgICAgICAgfSk7CgogICAgICAgICAgX3RoaXMyLmxvYWQoKTsKCiAgICAgICAgICBfdGhpczIuZGlhbG9nX2FkZF9hY2NvdW50ID0gZmFsc2U7CiAgICAgICAgICBfdGhpczIuYWRkX2FjY291bnRfZm9ybSA9IHt9OwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICBtZXNzYWdlOiByZXMuc3RhdHVzX21zZwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\src\\views\\new\\Permission.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div style=\"margin: 10px 0\">\r\n        <el-input v-model=\"search\" placeholder=\"请输入关键字\" style=\"width: 20%\" clearable></el-input>\r\n        <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"load\">查询</el-button>\r\n        <el-button type=\"primary\" @click=\"dialog_add_account = true\">\r\n            添加账号\r\n        </el-button>\r\n\r\n        <el-dialog v-model=\"dialog_add_account\" title=\"添加账号\" width=\"500px\">\r\n            <el-form :model=\"add_account_form\" label-width=\"100px\" label-position=\"left\">\r\n                <el-form-item label=\"账号名\" style=\"width: 80%\">\r\n                    <el-input v-model=\"add_account_form.account_name\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"账号密码\" style=\"width: 80%\">\r\n                    <el-input v-model=\"add_account_form.account_pwd\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"确认账号密码\" style=\"width: 80%\">\r\n                    <el-input v-model=\"add_account_form.account_pwd2\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"账号权限\" style=\"width: 80%\">\r\n                    <el-select v-model=\"add_account_form.account_permission\" placeholder=\"\">\r\n                        <el-option v-for=\"item in permission_option\" :key=\"item[0]\" :label=\"item[1]\" :value=\"item[0]\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n            </el-form>\r\n            <template #footer>\r\n                <span class=\"dialog-footer\">\r\n                <el-button @click=\"dialog_add_account = false\">取消</el-button>\r\n                <el-button type=\"primary\" @click=\"add_account\">\r\n                    确定添加\r\n                </el-button>\r\n                </span>\r\n            </template>\r\n        </el-dialog>\r\n\r\n        <el-table \r\n            v-loading=\"loading\"\r\n            :data=\"account_data\" \r\n            style=\"width: 100%\"\r\n        >\r\n            <el-table-column fixed prop=\"account_id\" label=\"账号ID\" width=\"150\" />\r\n            <el-table-column fixed prop=\"account_name\" label=\"账号名\" width=\"150\" />\r\n            <el-table-column fixed label=\"账号权限\" width=\"150\">\r\n                <template #default=\"scope\">\r\n                    <el-tag\r\n                    class=\"mx-1\"\r\n                    :disable-transitions=\"false\"\r\n                    >\r\n                    {{ this.permission_desc.get(scope.row.account_permission) }}\r\n                    </el-tag>\r\n                </template>\r\n            </el-table-column>\r\n            <el-table-column label=\"操作\" width=\"300\">\r\n                <template #default=\"scope\">\r\n                <el-button link type=\"primary\" size=\"small\" @click=\"handleClickOpenDialog(scope.$index)\"\r\n                    >修改</el-button\r\n                >\r\n                <el-button link type=\"danger\" size=\"small\" @click=\"handleDeleteUser(scope.row.user_id)\"\r\n                    >删除</el-button\r\n                >\r\n                </template>\r\n            </el-table-column>\r\n        </el-table>\r\n\r\n        <div style=\"margin: 10px 0\">\r\n        <el-pagination\r\n            @size-change=\"handleSizeChange\"\r\n            @current-change=\"handleCurrentChange\"\r\n            :current-page=\"currentPage\"\r\n            :page-sizes=\"[5, 10, 20]\"\r\n            :page-size=\"pageSize\"\r\n            layout=\"total, sizes, prev, pager, next, jumper\"\r\n            :total=\"total\">\r\n        </el-pagination>\r\n        </div>\r\n    </div>\r\n</template>\r\n<script>\r\nimport request from \"@/utils/request\";\r\n\r\nexport default {\r\n    name: \"Permission\",\r\n    data() {\r\n        return {\r\n            search: \"\",\r\n            loading: true,\r\n            dialog_add_account: false,\r\n            currentPage: 1,\r\n            pageSize: 10,\r\n            total: 0,\r\n            add_account_form: {},\r\n            account_data: new Array(),\r\n            permission_option: new Map([\r\n                [1, \"普通\"], \r\n                [2, '管理员'], \r\n            ]),\r\n            permission_desc: new Map([\r\n                [1, \"普通\"], \r\n                [2, '管理员'], \r\n                [3, '超级管理员'], \r\n            ]),\r\n        }\r\n    },\r\n    created() {\r\n        this.load()\r\n    },\r\n    methods: {\r\n        load() {\r\n            this.loading = true\r\n            request.get(\"/api/accounts\", {\r\n                params: {\r\n                \"page_num\": this.currentPage,\r\n                \"page_size\": this.pageSize,\r\n                \"search\": this.search\r\n                }\r\n            }).then(res => {\r\n                console.log(res)\r\n                if (res.status_code === 0) {\r\n                    this.account_data = res.accounts\r\n                    this.total = res.total\r\n                }\r\n            })\r\n\r\n            this.loading = false\r\n        },\r\n        handleSizeChange(pageSize) {  // 改变每页的大小\r\n            this.pageSize = pageSize;\r\n            this.load();\r\n        },\r\n        handleCurrentChange(pageNum) {  //改变当前页码\r\n            this.currentPage = pageNum;\r\n            this.load()\r\n        },\r\n        add_account() {\r\n            console.log(this.add_account_form)\r\n            if (this.add_account_form.account_pwd != this.add_account_form.account_pwd2) {\r\n                this.$message({\r\n                    type: \"info\",\r\n                    message: \"密码不一致\"\r\n                })\r\n                return \r\n            }\r\n            \r\n            request.post(\"/api/account\", this.add_account_form).then(res => {\r\n                console.log(res)\r\n                if (res.status_code === 0) {\r\n                    this.$message({\r\n                        type: \"success\",\r\n                        message: \"添加成功\"\r\n                    })\r\n                    this.load()\r\n                    this.dialog_add_account = false;\r\n                    this.add_account_form = {}\r\n                } else {\r\n                    this.$message({\r\n                        type: \"error\",\r\n                        message: res.status_msg\r\n                    })\r\n                }\r\n            })\r\n        }\r\n\r\n    }\r\n\r\n\r\n}\r\n</script>\r\n\r\n\r\n"],"sourceRoot":""}]}