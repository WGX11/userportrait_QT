{"remainingRequest":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\babel-loader\\lib\\index.js!D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js??ref--0-1!D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\src\\views\\new\\BasicBehaviorData.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\src\\views\\new\\BasicBehaviorData.vue","mtime":1699352770642},{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1699426402170},{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\babel-loader\\lib\\index.js","mtime":1699426403263},{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1699426402170},{"path":"D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1699426402439}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMubWFwLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5pdGVyYXRvci5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL3dlYi5kb20tY29sbGVjdGlvbnMuaXRlcmF0b3IuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5yZWdleHAuZXhlYy5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnN0cmluZy5zZWFyY2guanMiOwppbXBvcnQgcmVxdWVzdCBmcm9tICJAL3V0aWxzL3JlcXVlc3QiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkJhc2ljQmVoYXZpb3JEYXRhIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgc2VhcmNoOiAnJywKICAgICAgbG9hZGluZzogZmFsc2UsCiAgICAgIHRhYmxlRGF0YTogW10sCiAgICAgIGN1cnJlbnRQYWdlOiAxLAogICAgICBwYWdlU2l6ZTogMTAsCiAgICAgIHRvdGFsOiAwLAogICAgICBtZXJnZUluZGV4TWFwOiB7fQogICAgfTsKICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmxvYWQoKTsKICAgIHRoaXMubWVyZ2VJbmRleE1hcCA9IG5ldyBNYXAoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGxvYWQ6IGZ1bmN0aW9uIGxvYWQoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICByZXF1ZXN0LmdldCgiL2FwaS9iYXNpY19iZWhhdmlvcnMiLCB7CiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICAicGFnZV9udW0iOiB0aGlzLmN1cnJlbnRQYWdlLAogICAgICAgICAgInBhZ2Vfc2l6ZSI6IHRoaXMucGFnZVNpemUsCiAgICAgICAgICAic2VhcmNoIjogdGhpcy5zZWFyY2gKICAgICAgICB9CiAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CgogICAgICAgIGlmIChyZXMuc3RhdHVzX2NvZGUgPT09IDApIHsKICAgICAgICAgIF90aGlzLm1lcmdlKHJlcy5iYXNpY19iZWhhdmlvcnMpOwoKICAgICAgICAgIF90aGlzLnRhYmxlRGF0YSA9IHJlcy5iYXNpY19iZWhhdmlvcnM7CiAgICAgICAgICBfdGhpcy50b3RhbCA9IHJlcy50b3RhbDsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgX3RoaXMuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICBtZXNzYWdlOiByZXMuc3RhdHVzX21zZwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICB9LAogICAgbWVyZ2U6IGZ1bmN0aW9uIG1lcmdlKGRhdGEpIHsKICAgICAgdGhpcy5tZXJnZUluZGV4TWFwID0gbmV3IE1hcCgpOwogICAgICB2YXIgY3VySWR4ID0gMDsKCiAgICAgIGZvciAodmFyIGlkeCA9IDE7IGlkeCA8IGRhdGEubGVuZ3RoOyBpZHgrKykgewogICAgICAgIGlmIChkYXRhW2lkeF0udXNlcl9pZCA9PT0gZGF0YVtpZHggLSAxXS51c2VyX2lkKSB7CiAgICAgICAgICBjb250aW51ZTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgdGhpcy5tZXJnZUluZGV4TWFwLnNldChjdXJJZHgsIGlkeCAtIGN1cklkeCk7CiAgICAgICAgICBjdXJJZHggPSBpZHg7CiAgICAgICAgfQogICAgICB9CgogICAgICB0aGlzLm1lcmdlSW5kZXhNYXAuc2V0KGN1cklkeCwgZGF0YS5sZW5ndGggLSBjdXJJZHgpOwogICAgICBjb25zb2xlLmxvZyh0aGlzLm1lcmdlSW5kZXhNYXApOwogICAgfSwKICAgIGFycmF5U3Bhbk1ldGhvZDogZnVuY3Rpb24gYXJyYXlTcGFuTWV0aG9kKF9yZWYpIHsKICAgICAgdmFyIHJvdyA9IF9yZWYucm93LAogICAgICAgICAgY29sdW1uID0gX3JlZi5jb2x1bW4sCiAgICAgICAgICByb3dJbmRleCA9IF9yZWYucm93SW5kZXgsCiAgICAgICAgICBjb2x1bW5JbmRleCA9IF9yZWYuY29sdW1uSW5kZXg7CgogICAgICBpZiAoY29sdW1uSW5kZXggPT09IDApIHsKICAgICAgICB2YXIgcm93cyA9IHRoaXMubWVyZ2VJbmRleE1hcC5nZXQocm93SW5kZXgpOwogICAgICAgIHJldHVybiBbcm93cywgMV07CiAgICAgIH0KICAgIH0sCiAgICBoYW5kbGVTaXplQ2hhbmdlOiBmdW5jdGlvbiBoYW5kbGVTaXplQ2hhbmdlKHBhZ2VTaXplKSB7CiAgICAgIC8vIOaUueWPmOavj+mhteeahOWkp+WwjwogICAgICB0aGlzLnBhZ2VTaXplID0gcGFnZVNpemU7CiAgICAgIHRoaXMubG9hZCgpOwogICAgfSwKICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uIGhhbmRsZUN1cnJlbnRDaGFuZ2UocGFnZU51bSkgewogICAgICAvL+aUueWPmOW9k+WJjemhteeggQogICAgICB0aGlzLmN1cnJlbnRQYWdlID0gcGFnZU51bTsKICAgICAgdGhpcy5sb2FkKCk7CiAgICB9LAogICAgdXBkYXRlQmFzaWNCZWhhdmlvckRhdGE6IGZ1bmN0aW9uIHVwZGF0ZUJhc2ljQmVoYXZpb3JEYXRhKCkgewogICAgICB2YXIgX3RoaXMyID0gdGhpczsKCiAgICAgIHJlcXVlc3QucG9zdCgiL2FwaS9nZW5lX2Jhc2ljX2JlaGF2aW9yIikudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgaWYgKHJlcy5zdGF0dXNfY29kZSA9PT0gMCkgewogICAgICAgICAgX3RoaXMyLiRtZXNzYWdlKHsKICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICBtZXNzYWdlOiAi5pu05paw5Lit77yM6K+3NS0xMOWIhumSn+WQjuWIt+aWsCIKICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICBfdGhpczIuJG1lc3NhZ2UoewogICAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgICBtZXNzYWdlOiByZXMuc3RhdHVzX21zZwogICAgICAgICAgfSk7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["D:\\Project\\userportrait_QT\\user-portrait-for-qt-master\\frontend\\src\\views\\new\\BasicBehaviorData.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n  <div style=\"margin: 10px 0\">\r\n    <el-input v-model=\"search\" placeholder=\"请输入关键字\" style=\"width: 20%\" clearable></el-input>\r\n    <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"load\">查询</el-button>\r\n    <el-button type=\"primary\" style=\"margin-left: 5px\" @click=\"updateBasicBehaviorData\">更新基础行为数据</el-button>\r\n    \r\n    \r\n    <el-table \r\n      v-loading=\"loading\"\r\n      :span-method=\"arraySpanMethod\"\r\n      :data=\"tableData\" \r\n      style=\"width: 100%\"\r\n    >\r\n      <el-table-column prop=\"user_name\" label=\"user_name\" width=\"120\" />\r\n      <el-table-column prop=\"begin_time\" label=\"begin_time\" width=\"180\" />\r\n      <el-table-column prop=\"use_time\" label=\"use_time\" width=\"120\" />\r\n      <el-table-column prop=\"mouse_click_cnt\" label=\"mouse_click_cnt\" width=\"130\" />\r\n      <el-table-column prop=\"mouse_move_cnt\" label=\"mouse_move_cnt\" width=\"130\" />\r\n      <el-table-column prop=\"mouse_move_dis\" label=\"mouse_move_dis\" width=\"130\" />\r\n      <el-table-column prop=\"mouse_wheel_cnt\" label=\"mouse_wheel_cnt\" width=\"130\" />\r\n      <el-table-column prop=\"key_click_cnt\" label=\"key_click_cnt\" width=\"120\" />\r\n      <el-table-column prop=\"key_click_speed\" label=\"key_click_speed\" width=\"120\" />\r\n      <el-table-column prop=\"shortcut_cnt\" label=\"shortcut_cnt\" width=\"120\" />\r\n    </el-table>\r\n\r\n    <div style=\"margin: 10px 0\">\r\n      <el-pagination\r\n          @size-change=\"handleSizeChange\"\r\n          @current-change=\"handleCurrentChange\"\r\n          :current-page=\"currentPage\"\r\n          :page-sizes=\"[5, 10, 20]\"\r\n          :page-size=\"pageSize\"\r\n          layout=\"total, sizes, prev, pager, next, jumper\"\r\n          :total=\"total\">\r\n      </el-pagination>\r\n    </div>\r\n  \r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport request from \"@/utils/request\";\r\n\r\n\r\nexport default {\r\n  name: \"BasicBehaviorData\",\r\n  data() {\r\n    return {\r\n      search: '',\r\n      loading: false,\r\n      tableData: [],\r\n      currentPage: 1,\r\n      pageSize: 10,\r\n      total: 0,\r\n      mergeIndexMap: {}\r\n    }\r\n  },\r\n  created() {\r\n    this.load()\r\n    this.mergeIndexMap = new Map()\r\n  },\r\n  methods: {\r\n    load() {\r\n      this.loading = true\r\n      request.get(\"/api/basic_behaviors\", {\r\n        params: {\r\n          \"page_num\": this.currentPage,\r\n          \"page_size\": this.pageSize,\r\n          \"search\": this.search\r\n        }\r\n      }).then(res => {\r\n        console.log(res)\r\n        if (res.status_code === 0) {\r\n          this.merge(res.basic_behaviors)\r\n          this.tableData = res.basic_behaviors\r\n          this.total = res.total\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.status_msg\r\n          })\r\n        }\r\n      })\r\n\r\n      this.loading = false\r\n    },\r\n    merge(data) {\r\n      this.mergeIndexMap = new Map()\r\n      let curIdx = 0\r\n      for (var idx = 1; idx < data.length; idx++) {\r\n        if (data[idx].user_id === data[idx-1].user_id) {\r\n          continue\r\n        } else {\r\n          this.mergeIndexMap.set(curIdx, idx-curIdx)\r\n          curIdx = idx\r\n        }\r\n      }\r\n\r\n      this.mergeIndexMap.set(curIdx, data.length - curIdx)\r\n      console.log(this.mergeIndexMap)\r\n    },\r\n    arraySpanMethod({row,column,rowIndex,columnIndex}) {\r\n      if (columnIndex === 0) {\r\n        let rows = this.mergeIndexMap.get(rowIndex)\r\n        return [rows, 1]\r\n      }\r\n    },\r\n    handleSizeChange(pageSize) {  // 改变每页的大小\r\n      this.pageSize = pageSize;\r\n      this.load();\r\n    },\r\n    handleCurrentChange(pageNum) {  //改变当前页码\r\n      this.currentPage = pageNum;\r\n      this.load()\r\n    },\r\n    updateBasicBehaviorData() {\r\n      request.post(\"/api/gene_basic_behavior\").then(res => {\r\n        if (res.status_code === 0) {\r\n          this.$message({\r\n            type: \"success\",\r\n            message: \"更新中，请5-10分钟后刷新\"\r\n          })\r\n        } else {\r\n          this.$message({\r\n            type: \"error\",\r\n            message: res.status_msg\r\n          })\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"sourceRoot":""}]}